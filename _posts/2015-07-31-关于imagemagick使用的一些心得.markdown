---
layout:     post
title:      "关于imagemagick使用的一些心得"
subtitle:   ""
date:       2015-07-31
author:     "Francis Soung"
header-img: "img/post-bg-unix-linux.jpg"
tags:
    - Linux
---

> 之前旅行回来拍了许多照片，使我我萌生了要做一个旅行博客的想法，展示我的旅行瞬间。
> 
> 但是每张照片都超过3MB，图片越大需要的带宽和流量也就越大，服务器空间也是有限的，原图太占资源。

于是乎，我考虑到压缩图片，起初我是在mac上使用自带的图片处理工具，修改图片的大小来实现压缩处理，可是这样实在是太麻烦，需要一个个去修改，图片一多，我这太浪费时间，然后网上查询mac上图片压缩工具（JPEGmini lite），结果每天超过20张要收费，基本的图片不多能满足，但是压缩起来我这mac的声音立马就起来了，cpu飙升。。

本人也没有什么图片处理经验，只好求助于好哥们，给推荐了一个工具，imagemagick，好用，压缩效果很好，立马下降到几百KB，甚至一百多KB，立马爱上了此工具。

网上一查，此工具如此之强大，各种能想到的图片处理使用命令行都能做，有学到一个新东西。整理下这次使用到的命令，后续更新更多的使用技巧和方法。

**需要用到的命令就是convert**。

参数resize 用来缩小图片

> 用法： -resize 图片大小 如：-resize 50%x50% 把原图的长和宽都缩小50%

我用的是缩小图片尺寸来压缩图片的大小，当然你也可以通过改变图片的质量来达到压缩的目的，由于我的图片很多是个人旅行照片，所以我想保留个人的照片质量，来保证清晰度。

**参数quality** 用来改变图片的品质，品质越高，占用的空间越大。

示例：-quality 70 把图片的质量压缩到70%（基本上看不出和原图的区别）

**参数profile**  记录图片一些描述信息。例如相机信息（光圈，相机型号）、photoshop元数据，颜色表等信息。它占用的空间可以从几KB到几百KB，甚至可能更大。

可以通过两种方式来去掉这些信息。如+profile “*” 　或　-strip 

还有很多参数，如添加字体水印等，自己man convert吧，解释的非常详细。

我是用的命令

    find ./ -regex '.*\(jpg\|JPG\)' -exec convert -resize 50%x50% {} {} \;

还有一种

    find ./ -iname “*.jpg” -exec convert -strip +profile “*” -quality 85 {} {} \;

个人旅行博客地址：[弗朗西斯的简单生活](http://gallery.francissoung.com)

欢迎测试 提出意见。